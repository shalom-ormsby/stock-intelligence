# v0.3.0 Quick Reference Card

## üöÄ Most Common Usage Patterns

### Standard Analysis (Recommended)
```python
analyze_and_sync_to_notion("NVDA")
```
**What happens:**
1. Writes metrics to Stock Analyses (status: "Pending Analysis")
2. You get Notion notification ‚Üí open page ‚Üí run AI prompt
3. Click "Send to History" button when satisfied
4. Python detects button click ‚Üí archives to Stock History
5. Done! ‚úÖ

---

### Batch Processing (No Wait)
```python
# Process multiple stocks without waiting
analyze_and_sync_to_notion("AAPL", skip_polling=True)
analyze_and_sync_to_notion("GOOGL", skip_polling=True)
analyze_and_sync_to_notion("MSFT", skip_polling=True)

# Later, after running AI prompts in Notion, archive all at once:
notion = NotionClient(NOTION_API_KEY, STOCK_ANALYSES_DB_ID, STOCK_HISTORY_DB_ID)
notion.archive_ticker_to_history("AAPL")
notion.archive_ticker_to_history("GOOGL")
notion.archive_ticker_to_history("MSFT")
```

---

### Long AI Analysis (Custom Timeout)
```python
# If your AI prompt takes 15+ minutes to run
analyze_and_sync_to_notion("TSLA", timeout=900)  # 15 minutes
```

---

### Legacy Mode (Immediate History Write)
```python
# If you don't want to wait for AI analysis
analyze_and_sync_to_notion("AMZN", use_polling_workflow=False)
```

---

## üéØ Workflow Comparison

| Workflow | When to Use | Archive Timing | AI Content |
|----------|-------------|----------------|------------|
| **v0.3.0 (Default)** | Normal usage | After AI prompt + button click | ‚úÖ Included |
| **Skip Polling** | Batch processing | Manual later | ‚úÖ Included |
| **Legacy v0.2.9** | Quick metrics only | Immediate | ‚ùå Not included |

---

## üîß Manual Archive Commands

### By Ticker Name (Easiest)
```python
notion = NotionClient(NOTION_API_KEY, STOCK_ANALYSES_DB_ID, STOCK_HISTORY_DB_ID)
notion.archive_ticker_to_history("NVDA")
```

### By Page ID (If You Have It)
```python
notion = NotionClient(NOTION_API_KEY, STOCK_ANALYSES_DB_ID, STOCK_HISTORY_DB_ID)
notion.archive_to_history("1234abcd-5678-90ef-ghij-klmnopqrstuv")
```

---

## üìä Status Values Explained

| Status | Meaning | What to Do |
|--------|---------|------------|
| **Pending Analysis** | Metrics written, AI prompt not run yet | Open Notion ‚Üí Run AI prompt |
| **Send to History** | Button clicked, archiving in progress | Wait ~10 seconds |
| **Logged in History** | ‚úÖ Complete! Archived successfully | Nothing ‚Äî you're done |
| **Analysis Incomplete** | Timeout ‚Äî took too long | Archive manually or re-run |

---

## ‚ö° Quick Troubleshooting

**Problem:** Timeout every time
**Fix:** `analyze_and_sync_to_notion("TICKER", timeout=1200)  # 20 min`

**Problem:** Want to skip waiting
**Fix:** `analyze_and_sync_to_notion("TICKER", skip_polling=True)`

**Problem:** Need old workflow back
**Fix:** `analyze_and_sync_to_notion("TICKER", use_polling_workflow=False)`

---

## üí° Pro Tips

1. **Use skip_polling for end-of-day batch runs**
   - Process 10 tickers at 5 PM
   - Review AI outputs next morning
   - Archive all at once

2. **Increase timeout for complex tickers**
   - Large-cap stocks (NVDA, MSFT): 10 min is fine
   - Small-cap/volatile stocks: Consider 15 min

3. **Check "Analysis Incomplete" pages daily**
   - Filter Stock Analyses for this status
   - Either re-run or manually archive

4. **Archive old analyses retroactively**
   - Run AI prompt on old "New"/"Updated" pages
   - Use `archive_ticker_to_history()` to save them

---

## üéì Learning Path

**Day 1:** Try one ticker with defaults
```python
analyze_and_sync_to_notion("AAPL")
```

**Day 2:** Try batch mode
```python
analyze_and_sync_to_notion("NVDA", skip_polling=True)
# ... run AI prompt in Notion ...
notion.archive_ticker_to_history("NVDA")
```

**Day 3:** Customize timeout
```python
analyze_and_sync_to_notion("TSLA", timeout=900)
```

**Day 4:** You're an expert! üéâ

---

**Questions?** See `V0.3.0_UPGRADE_SUMMARY.md` for full documentation.
